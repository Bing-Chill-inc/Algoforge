<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: PartieEditeur/StructureAlternative.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: PartieEditeur/StructureAlternative.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class StructureAlternative
 * @classdesc Représente les différentes structures de contrôle.
 * @description Utilisé par les différentes structures de contrôle pour les instancier.
 * @extends {ElementGraphique}
 */
class StructureAlternative extends ElementGraphique {
	// ATTRIBUTS
	_listeConditions; // HTML Collection de Condition•s
	_editeur = document.querySelector("editeur-interface"); // Editeur

	// CONSTRUCTEUR
	/**
	 * @constructor
	 * @param {string|number} abscisse - L'abscisse.
	 * @param {string|number} ordonnee - L'ordonnée.
	 * @param {Array&lt;Condition>} listeConditions - La liste des conditions.
	 */
	constructor(abscisse, ordonnee, listeConditions = []) {
		super(abscisse, ordonnee);
		this._listeConditions = listeConditions;
		if (this._listeConditions.length == 0) {
			this._listeConditions.push(new Condition());
			this._listeConditions[0]._structure = this;
		}

		this.addEventListener("mousemove", function (e) {
			// update les liens vers les enfants
			for (let condition of this._listeConditions.children) {
				condition._elemParent._listeElementsEnfants.forEach((lien) => {
					lien.ligne.update();
				});
			}
		});
	}

	// ENCAPSULATION
	/**
	 * @description Renvoie la liste des conditions.
	 * @returns {Array&lt;Condition>} La liste des conditions.
	 */
	get _listeConditions() {
		return this._listeConditions;
	}

	/**
	 * @description Définit la liste des conditions.
	 * @param {Array&lt;Condition>} value - La nouvelle liste des conditions.
	 */
	set _listeConditions(value) {
		this._listeConditions = value;
	}

	// METHODES
	/**
	 * @description Affiche la structure alternative.
	 */
	afficher() {
		console.log(
			`Abscisse : ${this._abscisse} Ordonnée : ${this._ordonnee}`,
		);
		console.log("Conditions :");
		this._listeConditions.forEach((condition) => {
			condition.afficher();
		});
	}
	/**
	 * @description Récupère les enfants de la structure alternative.
	 * @param {ElementGraphique} typeRechercher - Le type d'ElementGraphique recherché.
	 * @returns {Array&lt;ElementGraphique>} La liste des ElementGraphique correspondant au type recherché.
	 */
	getEnfants(typeRechercher = ElementGraphique) {
		let listeEnfants = [];
		for (let condition of this._listeConditions.children) {
			for (let elem of condition._elemParent._listeElementsEnfants) {
				listeEnfants.push(elem.element);
			}
		}
		listeEnfants = PlanTravail.FiltrerElementsGraphique(
			listeEnfants,
			typeRechercher,
		);
		return PlanTravail.trierElementsGraphique(listeEnfants);
	}

	/**
	 * @description Ajoute une condition à la structure alternative.
	 * @param {Condition} condition - La condition à ajouter.
	 */
	ajouterCondition(condition = new Condition()) {
		condition._structure = this;
		this._listeConditions.appendChild(condition);
		this._editeur.ajouterEvenement(
			new EvenementCreationElement(condition, this._listeConditions),
		);
	}

	/**
	 * @description Retire une condition de la structure alternative.
	 * @param {Condition} condition - La condition à retirer.
	 */
	supprimerCondition(condition = null) {
		if (this._listeConditions.children.length == 1) {
			return; // On ne peut pas supprimer la dernière condition
		}
		if (condition instanceof Condition) {
			this._editeur.ajouterEvenement(
				new EvenementSuppressionElement(condition),
			);
			condition._elemParent.delierTousLesEnfants();
			this._listeConditions.removeChild(condition);
		} else {
			// Parcourons les conditions de la droite vers la gauche et retirons la première qui est vide
			for (
				let i = this._listeConditions.children.length - 1;
				i >= 0;
				i--
			) {
				if (this._listeConditions.children[i]._libelle == "") {
					this._listeConditions.children[
						i
					]._elemParent.delierTousLesEnfants();
					this._listeConditions.removeChild(
						this._listeConditions.children[i],
					);
					break;
				}
			}
		}
	}

	/**
	 * @description Renvoie la taille en abscisse de la structure alternative.
	 * @returns {number} La taille en abscisse.
	 */
	getTailleAbscisse() {
		// Nombre de conditions * taille d'une condition
		let taille = 0;
		for (let condition of this._listeConditions.children) {
			taille += condition.getTailleAbscisse();
		}
		return taille;
	}

	/**
	 * @description Renvoie la taille en ordonnée de la structure alternative.
	 * @returns {number} La taille en ordonnée.
	 */
	getTailleOrdonnee() {
		return 4;
	}

	/**
	 * @description Décale une condition dans la structure alternative.
	 * @param {Condition} pCondition - La condition à décaler.
	 * @param {number} decalage - Le décalage à appliquer.
	 * @param {boolean} estAnnulation - Indique si le décalage est une annulation.
	 */
	decalerCondition(pCondition, decalage, estAnnulation = false) {
		if (!estAnnulation)
			this._editeur.ajouterEvenement(
				new EvenementDeplacementCondition(pCondition, decalage),
			);
		if (decalage == -1 &amp;&amp; pCondition instanceof Condition) {
			// Décaler la condition vers la gauche
			let autreCondition = pCondition.previousElementSibling;
			if (autreCondition != null) {
				pCondition.style.animation =
					"jumpOverLeft var(--specialTransitionTime) ease-in-out";
				autreCondition.style.animation =
					"slideUnderRight var(--specialTransitionTime) ease-in-out";
				setTimeout(() => {
					pCondition.parentElement.insertBefore(
						pCondition,
						autreCondition,
					);
					pCondition.style.animation = "";
					autreCondition.style.animation = "";
					// update les liens vers les enfants
					pCondition._elemParent._listeElementsEnfants.forEach(
						(lien) => {
							lien.ligne.update();
						},
					);

					autreCondition._elemParent._listeElementsEnfants.forEach(
						(lien) => {
							lien.ligne.update();
						},
					);
				}, parseFloat(document.body.style.getPropertyValue("--specialTransitionTime")) * 1000);
			}
		} else if (decalage == 1 &amp;&amp; pCondition instanceof Condition) {
			// Décaler la condition vers la droite
			let autreCondition = pCondition.nextElementSibling;
			if (autreCondition != null) {
				pCondition.style.animation =
					"jumpOverRight var(--specialTransitionTime) ease-in-out";
				autreCondition.style.animation =
					"slideUnderLeft var(--specialTransitionTime) ease-in-out";
				setTimeout(() => {
					pCondition.parentElement.insertBefore(
						autreCondition,
						pCondition,
					);
					pCondition.style.animation = "";
					autreCondition.style.animation = "";
					pCondition._elemParent._listeElementsEnfants.forEach(
						(lien) => {
							lien.ligne.update();
						},
					);

					autreCondition._elemParent._listeElementsEnfants.forEach(
						(lien) => {
							lien.ligne.update();
						},
					);
				}, parseFloat(document.body.style.getPropertyValue("--specialTransitionTime")) * 1000);
			}
		}
	}

	/**
	 * @description Ajoute une condition par rapport à une autre condition.
	 * @param {Condition} pCondition - La condition de référence.
	 * @param {number} decalage - Le décalage à appliquer.
	 * @param {boolean} estAnnulation - Indique si l'ajout est une annulation.
	 */
	ajouterConditionParRapportA(pCondition, decalage, estAnnulation = false) {
		if (decalage == -1 &amp;&amp; pCondition instanceof Condition) {
			// Ajouter une condition à gauche
			let newCondition = new Condition();
			newCondition._structure = this;
			this._listeConditions.insertBefore(newCondition, pCondition);
			if (!estAnnulation)
				this._editeur.ajouterEvenement(
					new EvenementCreationElement(
						newCondition,
						this._listeConditions,
					),
				);
		} else if (decalage == 1 &amp;&amp; pCondition instanceof Condition) {
			// Ajouter une condition à droite
			let newCondition = new Condition();
			newCondition._structure = this;
			this._listeConditions.insertBefore(
				newCondition,
				pCondition.nextElementSibling,
			);
			if (!estAnnulation)
				this._editeur.ajouterEvenement(
					new EvenementCreationElement(
						newCondition,
						this._listeConditions,
					),
				);
		}
		setTimeout(() => {
			// update les liens vers les enfants
			pCondition._elemParent._listeElementsEnfants.forEach((lien) => {
				lien.ligne.update();
			});
		}, 200);
	}

	/**
	 * @description Supprime la structure alternative.
	 */
	supprimer() {
		for (let condition of this._listeConditions.children) {
			condition._elemParent.delierTousLesEnfants();
		}
		if (this._parent != null) this._parent.delierEnfant(this);
		this.remove();
	}

	/**
	 * @description Renvoie les enfants de la structure alternative par condition.
	 * @returns {Array&lt;Array&lt;ElementGraphique>>} La liste des enfants par condition.
	 */
	getEnfantsParCondition() {
		let listeConditionsEnfants = [];
		for (let condition of this._listeConditions.children) {
			let listeEnfantsParCondition = [];
			for (let elem of condition._elemParent._listeElementsEnfants) {
				listeEnfantsParCondition.push(elem.element);
			}
			listeEnfantsParCondition = PlanTravail.trierElementsGraphique(
				listeEnfantsParCondition,
			);
			listeConditionsEnfants.push(listeEnfantsParCondition);
		}
		return listeConditionsEnfants;
	}

	/**
	 * @description Renvoie une condition par son index.
	 * @param {number} index - L'index de la condition.
	 * @returns {Condition} La condition correspondante.
	 */
	getCondition(index) {
		return this._listeConditions.children[index];
	}

	/**
	 * @description Génère les options contextuelles pour la structure alternative.
	 * @param {Editeur} editeur - L'éditeur d'algorithmes.
	 * @returns {Array&lt;ElementMenu>} La liste des options contextuelles.
	 */
	genererOptionsContextuelles(editeur) {
		let listeOptions = super.genererOptionsContextuelles(editeur);

		// Ajouter la possibilité de délier les enfants
		listeOptions.push(
			new ElementMenu("Délier toutes les conditions", () => {
				console.log("Supprimer");
				for (let condition of this._listeConditions.children) {
					condition._elemParent.delierTousLesEnfants();
				}
			}),
		);
		return listeOptions;
	}
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AnomalieConceptuelle.html">AnomalieConceptuelle</a></li><li><a href="AvertissementConceptuel.html">AvertissementConceptuel</a></li><li><a href="AvertissementDonneeDynamiquementTypee.html">AvertissementDonneeDynamiquementTypee</a></li><li><a href="AvertissementInformationsInconsistantesSi.html">AvertissementInformationsInconsistantesSi</a></li><li><a href="AvertissementPlanTropGrand.html">AvertissementPlanTropGrand</a></li><li><a href="AvertissementSProblemeJamaisExecute.html">AvertissementSProblemeJamaisExecute</a></li><li><a href="AvertissementStructureInoptimale.html">AvertissementStructureInoptimale</a></li><li><a href="AvertissementTropDeSousElements.html">AvertissementTropDeSousElements</a></li><li><a href="Bibliotheque.html">Bibliotheque</a></li><li><a href="Condition.html">Condition</a></li><li><a href="ConditionSortie.html">ConditionSortie</a></li><li><a href="DictionnaireDonnee.html">DictionnaireDonnee</a></li><li><a href="Editeur.html">Editeur</a></li><li><a href="ElementGraphique.html">ElementGraphique</a></li><li><a href="ElementMenu.html">ElementMenu</a></li><li><a href="ElementMenuCompose.html">ElementMenuCompose</a></li><li><a href="ElementMenuKeyboardTip.html">ElementMenuKeyboardTip</a></li><li><a href="ElementParent.html">ElementParent</a></li><li><a href="ErreurArretHorsIteratif.html">ErreurArretHorsIteratif</a></li><li><a href="ErreurArretIteratifBornee.html">ErreurArretIteratifBornee</a></li><li><a href="ErreurBoucleBorneeSansFin.html">ErreurBoucleBorneeSansFin</a></li><li><a href="ErreurBoucleSansSortie.html">ErreurBoucleSansSortie</a></li><li><a href="ErreurComparaisonSwitch.html">ErreurComparaisonSwitch</a></li><li><a href="ErreurConceptuelle.html">ErreurConceptuelle</a></li><li><a href="ErreurDonneeInutilisee.html">ErreurDonneeInutilisee</a></li><li><a href="ErreurDonneeMagique.html">ErreurDonneeMagique</a></li><li><a href="ErreurResultatInutilisee.html">ErreurResultatInutilisee</a></li><li><a href="ErreurSyntaxeAssignation.html">ErreurSyntaxeAssignation</a></li><li><a href="ErreurSyntaxeComparaison.html">ErreurSyntaxeComparaison</a></li><li><a href="ErreurTypesInconsistantsAlternatif.html">ErreurTypesInconsistantsAlternatif</a></li><li><a href="EvenementCreationElement.html">EvenementCreationElement</a></li><li><a href="EvenementDeplacementCondition.html">EvenementDeplacementCondition</a></li><li><a href="EvenementDeplacementElement.html">EvenementDeplacementElement</a></li><li><a href="EvenementDeplacementElementMultiples.html">EvenementDeplacementElementMultiples</a></li><li><a href="EvenementEdition.html">EvenementEdition</a></li><li><a href="EvenementEditionDonneesProbleme.html">EvenementEditionDonneesProbleme</a></li><li><a href="EvenementEditionExpressionSwitch.html">EvenementEditionExpressionSwitch</a></li><li><a href="EvenementEditionLibelleCondition.html">EvenementEditionLibelleCondition</a></li><li><a href="EvenementEditionLibelleProbleme.html">EvenementEditionLibelleProbleme</a></li><li><a href="EvenementEditionResultatsProbleme.html">EvenementEditionResultatsProbleme</a></li><li><a href="EvenementEditionStructureIterative.html">EvenementEditionStructureIterative</a></li><li><a href="EvenementEditionTexte.html">EvenementEditionTexte</a></li><li><a href="EvenementLiaison.html">EvenementLiaison</a></li><li><a href="EvenementSuppressionElement.html">EvenementSuppressionElement</a></li><li><a href="EvenementSuppressionLiaison.html">EvenementSuppressionLiaison</a></li><li><a href="FenetreModale.html">FenetreModale</a></li><li><a href="IndicateurZoom.html">IndicateurZoom</a></li><li><a href="Information.html">Information</a></li><li><a href="Initialise%252520l_indicateur%252520de%252520zoom%252520et%252520configure%252520les%252520boutons%252520de%252520zoom..html">Initialise l'indicateur de zoom et configure les boutons de zoom.</a></li><li><a href="Initialise%252520l_%2525C3%2525A9diteur%252520et%252520configure%252520les%252520%2525C3%2525A9v%2525C3%2525A9nements%252520et%252520les%252520%2525C3%2525A9l%2525C3%2525A9ments%252520de%252520l_interface%252520utilisateur..html">Initialise l'éditeur et configure les événements et les éléments de l'interface utilisateur.</a></li><li><a href="InviteBornesPourSI.html">InviteBornesPourSI</a></li><li><a href="InviteNouvelleBibliotheque.html">InviteNouvelleBibliotheque</a></li><li><a href="Lien.html">Lien</a></li><li><a href="LienCompositionProbleme.html">LienCompositionProbleme</a></li><li><a href="LienDroit.html">LienDroit</a></li><li><a href="LienTriple.html">LienTriple</a></li><li><a href="Ligne.html">Ligne</a></li><li><a href="MenuCompte.html">MenuCompte</a></li><li><a href="MenuContextuel.html">MenuContextuel</a></li><li><a href="MenuDeroulant.html">MenuDeroulant</a></li><li><a href="PlanTravail.html">PlanTravail</a></li><li><a href="Probleme.html">Probleme</a></li><li><a href="Procedure.html">Procedure</a></li><li><a href="RepresentationSelectionSimple.html">RepresentationSelectionSimple</a></li><li><a href="Selection.html">Selection</a></li><li><a href="SelectionRectangle.html">SelectionRectangle</a></li><li><a href="SousPlanTravail.html">SousPlanTravail</a></li><li><a href="StructureAlternative.html">StructureAlternative</a></li><li><a href="StructureIterative.html">StructureIterative</a></li><li><a href="StructureIterativeBornee.html">StructureIterativeBornee</a></li><li><a href="StructureIterativeNonBornee.html">StructureIterativeNonBornee</a></li><li><a href="StructureSi.html">StructureSi</a></li><li><a href="StructureSwitch.html">StructureSwitch</a></li><li><a href="SymboleDecomposition.html">SymboleDecomposition</a></li><li><a href="ThemeEditeur.html">ThemeEditeur</a></li><li><a href="Type.html">Type</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Jan 21 2025 08:08:41 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
